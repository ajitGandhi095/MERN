<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>String-Length | Javascript</title>
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.css">
    <script type="text/javascript">
        "use strict";
        function VerifyRequired() {
            var userName= document.getElementById("txtName").value;
            var userError= document.getElementById("userError");

            if(userName.length==0) {
                userError.innerHTML= "User Name Required".fontcolor('red');
            }
            else {
                if(userName.length < 4) {
                    userError.innerHTML= "User Name is too short".fontcolor("gold");
                }
                else {
                    userError.innerHTML= "";
                    var firstCharCode= userName.charCodeAt(0);
                    if(firstCharCode>=65 && firstCharCode<=90) {
                        userError.innerHTML= "";
                    }
                    else {
                        userError.innerHTML="Name Must be starts with upper case latter".fontcolor('red');
                    }
                }
            }
        }

        function VerifyComments() {
            var comments= document.getElementById("txtComments").value;
            var commentsWarning= document.getElementById("commentWarning");
            var maxlength= 100;

            commentsWarning.innerHTML= `100 [${maxlength-comments.length}]  chars remaining`;
        }

        function VerifyEmail() {
            var email= document.getElementById("txtEmail").value;
            var emailError= document.getElementById("emailError");
            if(email.indexOf("@")==-1) {
                emailError.innerHTML= "Invalid Email: Please include @".fontcolor('red');
            } 
            else {
                if(email.endsWith("gmail.com")) {
                    emailError.innerHTML= "";
                }
                else {
                    emailError.innerHTML= "Please enter valid gmail".fontcolor('red');
                }
            }
        }

        function VerifyCard() {
            var card= document.getElementById("txtCard").value;
            var imgCard= document.getElementById("imgCard");
            if(card.startsWith("4455")) {
                imgCard.src="../public/images/visa.png";
            }
            else {
                imgCard.src="../public/images/master-card.png";
            }
        }
    </script>
</head>
<body class="container-fluid">
    
    <dl class="mt-3 w-25">
        <dt>User name</dt>
        <dd> <input type="text" id="txtName" onkeyup="VerifyRequired()" onblur="VerifyRequired()"></dd>
        <dd id="userError"></dd>

        <dt>Your Comments</dt>
        <dd>
            <textarea onkeyup="VerifyComments()" id="txtComments" maxlength="100" rows="5" cols="40"></textarea>
        </dd>
        <dd id="commentWarning"></dd>

        <dt>Your Email</dt>
        <dd> <input type="text" id="txtEmail" onblur="VerifyEmail()"> </dd>
        <dd id="emailError"></dd>

        <dt>Your Card</dt>
        <dd class="input-group"> 
            <input type="text" class="form-control" id="txtCard" onblur="VerifyCard()">
            <img width="80px" id="imgCard" class="input-group-text"> 
        </dd>
    </dl>

</body>
</html>